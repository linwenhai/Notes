## 连接池大小

### 1 查看当前实时连接数

```sql
    mysql> show status like 'Threads%';  
    +-------------------+-------+  
    | Variable_name     | Value |  
    +-------------------+-------+  
    | Threads_cached    | 58    |  
    | Threads_connected | 57    |   #打开的连接数  
    | Threads_created   | 3676  |  
    | Threads_running   | 4     |   #激活的连接数，这个数值一般远低于connected数值  
    +-------------------+-------+  
```



### 2 查询数据库当前设置的最大连接数

```sql
mysql> show variables like '%max_connections%';  
    +-----------------+-------+  
    | Variable_name   | Value |  
    +-----------------+-------+  
    | max_connections | 100  |  
    +-----------------+-------+ 
```

>可以在/etc/my.cnf里面设置数据库的最大连接数  
>max_connections = 1000  



### 3 JDBC连接池参数

- jdbc.initialSize=0      //初始化连接数

- jdbc.maxActive=30     	//最大数据库连接数，0表示无限制

- jdbc.maxIdle=20         //最大闲置的连接个数，0表示没有限制

- jdbc.maxWait=1000    	//超时等待时间，以毫秒为单位

- jdbc.removeAbandoned=true //是否自动回收超时连接

- jdbc.removeAbandonedTimeout=60 //设置被遗弃的连接的超时的时间，以秒数为单位

- jdbc.logAbandoned = true //是否在自动回收超时连接的时候打印连接的超时错误

- jdbc.validationQuery=select 1 from dual //给出一条简单的sql语句进行验证

- jdbc.testOnBorrow=true //在取出连接时进行有效验证

