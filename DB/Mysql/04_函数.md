## 函数

### 1 字符串函数

`concat(S1,S1,...,Sn)`：把传入参数连接为一个字符串。

`insert(str,x,y,instr)`：把字符串str从第x位开始，y个字符长度，替换字符串instr。

`lower(str)`：把字符串str转换成小写。

`upper(str)`：把字符串str转换成小写。

`left(str,x)`：返回字符串str最左边的x位字符。

`right(str,x)`：返回字符串str最右边的x位字符。

`lpad(str,n,pad)`：用字符串pad对str最左边填充，填充位数为n。

`rpad(str,n,pad)`：用字符串pad对str最右边填充，填充位数为n。

`ltrim(str)`：去掉字符串str左侧空格。

`rtrim(str)`：去掉字符串str左侧空格。

`replace(str,a,b)`：用字符串b替字符串str中所有的字符串a。

`strcmp(s1,s2)`：比较字符串s1和s2的ASCII码大小，s1大于s2返回1，相等返回0，小于返回-1。

`trim(str)`：去掉字符串str前后空格。

`substring(str,x,y)`：返回字符串str中第x位起，y个字符长度的字符串。



### 2 数值函数

`abs(x)`：返回x绝对值。

`ceil(x)`：返回大于x的最小整数。

`floor(x)`：返回小于x的最大整数。

`mod(x,y)`：返回x/y的模。

`rand()`：返回0~1内随机数，100*rand()，返回0~100内随机数。

`round(x,y)`：返回数字x的四舍五入值，bing保留y位小数。

`truncate(x,y)`：返回保留y位小数，x的值。



### 3 时间函数

`curdate()`：返回当前日期。

```sql
SELECT CURDATE();
```

>2019-08-28



`curtime()`：返回当前时间。

```sql
SELECT CURTIME();
```

>17:36:35



`now()`：返回当前日期和时间，年月日时分秒。

```sql
SELECT NOW();
```

>2019-08-28 17:33:17



`date(date)`：函数返回给定参数的日期部分。

```sql
SELECT DATE(t.crtTime) FROM tb_sf_pay_req t LIMIT 1;
```

>2017-12-29



`week(date)`：返回给定日期是一年中第几周。

`year(date)`：返回给定日期是那一年。

`hour(time)`：返回给定时间的小时。

`minute(time)`：返回给定时间的分钟。



`date_format(date,fmt)`：按fmt格式化日期date。

```sql
SELECT DATE_FORMAT(NOW(),'%Y_%m_%d %H:%i:%S');
```

>2019_08_28 17:39:00





`date_add(date,interval expr type)`：函数向日期添加指定的时间间隔。

`date_sub(date,INTERVAL expr type) `：函数从日期减去指定的时间间隔。

type类型：hour, minute, second, year, month, day

expr：数字

```sql
SELECT DATE_ADD(CURDATE(),INTERVAL 1 DAY);
```

>2019-08-29



```sql
SELECT DATE_SUB(CURDATE(),INTERVAL 1 DAY);
```

>2019-08-27



datediff(date1,date2)`：计算两日期之间相差天数。



### 4 流程函数

`if(value,t,f)`：如value为true，返回t值，否则返回f值。

```sql
select if(salary>5000,'high','row') from salary;
```



`ifnull(value1,value2)`：如value1不为空，返回value1值，否则返回value2值。

```sql
select ifnull(salary,0) from salary;
```



`case when [value1] then [result1] ... else [default] end`：如value1为true，返回result1，否则返回default值。

```sql
select case when salary<=5000 then 'low' else 'high' end from salary;
```



`case expr when [value1] then [result1] ... else [default] end`：如expr等于value1，返回result1，否则返回default值。

```sql
select case salary when 5000 then 'low' else 'high' end from salary;
```



### 5 其他常用函数

`database()`：返回当前数据库名。

`version()`：返回当前数据库版本。

`user()`：返回当前登录用户。









