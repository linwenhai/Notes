## 权限和安全

用户通过权限认证，按user-->db-->tables_priv-->columns_priv权限分配
mysql库权限表：user，db，host

#### 1 创建用户

```mysql
mysql> create user 'z1'@'%' identified by 'sf123456'; 
```



#### 2 授权

```mysql
# 授予z1 test1库的select权限
mysql> grant select on test1.* to 'z1'@'%';
# 授予z1 test1库的select,insert,delete,update权限
mysql> grant select,insert,delete,update on test1.* to 'z1'@'%';
# 授予z1 test1库的所有执行权限
mysql> grant all privileges on test1.* to 'z1'@'%'; 
# 授予z1test1库的所有执行权限和grant权限
mysql> grant all privileges on test1.* to 'z1'@'%' with grant option; 
```



#### 2 查询库的用户权限

```mysql
mysql> use mysql
mysql> select * from db where Db='test1' and User='z1'\G	#查询test1库的z1用户权限
```



#### 3 查询用户授权

```mysql
mysql> use mysql
mysql> select user,host from user;		#查询用户
mysql> show grants for 'z1'@'%';	
mysql> use information_schema;
mysql> select * from schema_privileges where grantee="'z1'@'%'";	#查询z1授权
```



#### 4 回收权限

```mysql
mysql> use mysql
mysql> revoke select on z1.* from 'z1'@'%';  	#回收z1权限
mysql> delete from user where user='z1';  		#删除z1用户
```



#### 5 重置密码

```mysql
mysql> set password for 'z1'@'%'=password('sf123456');	#重置密码
mysql> set password=password('sf123456');				#重置密码
```



#### 6 刷新

```mysql
mysql> flush privileges;
```



