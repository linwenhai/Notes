## 高级

#### 1 SELECT TOP

SELECT TOP 子句用于规定要返回的记录的数目。
SELECT TOP 子句对于拥有数千条记录的大型表来说，是非常有用的。

```sql
语法：
SELECT column_name(s) FROM table_name LIMIT number;
实例：
SELECT * FROM Websites LIMIT 2;
```



#### 2 LIKE

LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式。

```sql
语法：
SELECT column_name(s) FROM table_name
WHERE column_name LIKE pattern;
实例：
SELECT * FROM Websites WHERE name LIKE 'G%';
```



#### 3 通配符

通配符可用于替代字符串中的任何其他字符。
`%`替代 0 个或多个字符
`_`替代一个字符

```sql
实例：
SELECT * FROM Websites WHERE url LIKE 'https%';
SELECT * FROM Websites WHERE name LIKE '_oogle';
```



#### 4 IN

IN 操作符允许您在 WHERE 子句中规定多个值。

```sql
语法：
SELECT column_name(s) FROM table_name
WHERE column_name IN (value1,value2,...);
实例：
SELECT * FROM Websites WHERE name IN ('Google','菜鸟教程');
```



#### 5 BETWEEN

BETWEEN 操作符用于选取介于两个值之间的数据范围内的值。

```sql
语法：
SELECT column_name(s) FROM table_name
WHERE column_name BETWEEN value1 AND value2;
实例：
SELECT * FROM Websites WHERE alexa BETWEEN 1 AND 20;
SELECT * FROM Websites WHERE alexa NOT BETWEEN 1 AND 20;
SELECT * FROM Websites WHERE (alexa BETWEEN 1 AND 20)
AND country NOT IN ('USA', 'IND');
```



#### 6 别名

通过使用 SQL，可以为表名称或列名称指定别名。

```sql
语法：
SELECT column_name AS alias_name FROM table_name;
SELECT column_name(s) FROM table_name AS alias_name;
实例：
SELECT name AS n, country AS c FROM Websites;
SELECT w.name, w.url, a.count, a.date FROM Websites AS w, access_log AS a 
WHERE a.site_id=w.id and w.name="菜鸟教程";
```



#### 7 JOIN

```sql
语法：
SELECT column_name(s) FROM table1
INNER JOIN table2 ON table1.column_name=table2.column_name;
实例：
SELECT Websites.name, access_log.count, access_log.date FROM Websites
INNER JOIN access_log ON Websites.id=access_log.site_id
ORDER BY access_log.count;
```

注释：INNER JOIN 关键字在表中存在至少一个匹配时返回行。如果 "Websites" 表中的行在 "access_log" 中没有匹配，则不会列出这些行。



```sql
语法：
SELECT column_name(s) FROM table1
LEFT JOIN table2 ON table1.column_name=table2.column_name;
实例：
SELECT Websites.name,access_log.count,access_log.date FROM Websites
LEFT JOIN access_log ON Websites.id=access_log.site_id
ORDER BY access_log.count DESC;
```

注释：LEFT JOIN 关键字从左表（Websites）返回所有的行，即使右表（access_log）中没有匹配。



```sql
语法：
SELECT column_name(s) FROM table1
RIGHT JOIN table2 ON table1.column_name=table2.column_name;
实例：
SELECT Websites.name, access_log.count, access_log.date FROM access_log
RIGHT JOIN Websites ON access_log.site_id=Websites.id
ORDER BY access_log.count DESC;
```



#### 8 UNION

UNION 操作符用于合并两个或多个 SELECT 语句的结果集。

```sql
语法：
SELECT column_name(s) FROM table1
UNION
SELECT column_name(s) FROM table2;

SELECT column_name(s) FROM table1
UNION ALL
SELECT column_name(s) FROM table2;
```



#### 9 INSERT INTO SELECT 

INSERT INTO SELECT 语句从一个表复制数据，然后把数据插入到一个已存在的表中。

```sql
语法：
INSERT INTO table2 SELECT * FROM table1;
```



#### 10 CREATE TABLE

```sql
语法：
CREATE TABLE table_name(
column_name1 data_type(size),
column_name2 data_type(size),
column_name3 data_type(size),
....
);
```

data_type 参数规定列的数据类型（例如 varchar、integer、decimal、date 等等）



#### 11 约束

约束可以在创建表时规定（通过 CREATE TABLE 语句），或者在表创建之后规定（通过 ALTER TABLE 语句）。

```sql
语法：
CREATE TABLE table_name(
column_name1 data_type(size) constraint_name,
column_name2 data_type(size) constraint_name,
column_name3 data_type(size) constraint_name,
....
);
```



#### 12 NOT NULL约束

NOT NULL 约束强制列不接受 NULL 值。

```sql
实例：
CREATE TABLE Persons(
P_Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255)
)
```



#### 13 UNIQUE约束

UNIQUE 约束唯一标识数据库表中的每条记录。
每个表可以有多个 UNIQUE 约束，但是每个表只能有一个 PRIMARY KEY 约束

```sql
实例：
CREATE TABLE Persons(
P_Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255),
UNIQUE (P_Id)
);

ALTER TABLE Persons ADD UNIQUE(P_Id);		--当表已被创建时，创建 UNIQUE 约束
```



#### 14 PRIMARY KEY约束

PRIMARY KEY 约束唯一标识数据库表中的每条记录。
主键必须包含唯一的值。
主键列不能包含 NULL 值。
每个表都应该有一个主键，并且每个表只能有一个主键。

```sql
实例：
CREATE TABLE Persons(
P_Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255),
PRIMARY KEY (P_Id)
);

ALTER TABLE Persons ADD PRIMARY KEY (P_Id);	--当表已被创建时，创建 PRIMARY KEY 约束
ALTER TABLE Persons DROP PRIMARY KEY;		--撤销 PRIMARY KEY 约束
```



#### 15 FOREIGN KEY 约束

FOREIGN KEY 指向另一个表中的 UNIQUE KEY(唯一约束的键)

```sql
实例：
CREATE TABLE Orders(
O_Id int NOT NULL,
OrderNo int NOT NULL,
P_Id int,
PRIMARY KEY (O_Id),
FOREIGN KEY (P_Id) REFERENCES Persons(P_Id)
);

ALTER TABLE Orders ADD FOREIGN KEY (P_Id) REFERENCES Persons(P_Id)；
--表已被创建时，创建 FOREIGN KEY 约束
ALTER TABLE Orders DROP FOREIGN KEY fk_PerOrders；	--撤销 FOREIGN KEY 约束
```



#### 16 CHECK约束

CHECK 约束用于限制列中的值的范围。

```sql
实例：
CREATE TABLE Persons(
P_Id int NOT NULL,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255),
CHECK (P_Id>0)
);

ALTER TABLE Persons ADD CHECK (P_Id>0);		--当表已被创建时，创建 CHECK 约束
ALTER TABLE Persons DROP CHECK chk_Person;	--撤销 CHECK 约束
```



#### 17 DEFAULT约束

DEFAULT 约束用于向列中插入默认值。

```sql
实例：
CREATE TABLE Persons(
    P_Id int NOT NULL,
    LastName varchar(255) NOT NULL,
    FirstName varchar(255),
    Address varchar(255),
    City varchar(255) DEFAULT 'Sandnes'
);

ALTER TABLE Persons ALTER City SET DEFAULT 'SANDNES';	--当表已被创建时，创建 DEFAULT 约束
ALTER TABLE Persons ALTER City DROP DEFAULT;			--撤销 DEFAULT 约束
```



#### 18 CREATE INDEX 

CREATE INDEX 语句用于在表中创建索引。

```sql
语法：
CREATE INDEX index_name ON table_name (column_name)
实例：
CREATE INDEX PIndex ON Persons (LastName);
CREATE INDEX PIndex ON Persons (LastName, FirstName);

ALTER TABLE table_name DROP INDEX index_name;	--删除表中的索引
```



#### 19  TRUNCATE TABLE

仅仅需要删除表内的数据，但并不删除表本身

```sql
语法：
TRUNCATE TABLE table_name
```



#### 20  ALTER TABLE

ALTER TABLE 语句用于在已有的表中添加、删除或修改列。

```sql
语法：
ALTER TABLE table_name ADD column_name datatype		--添加列
ALTER TABLE table_name DROP COLUMN column_name		--删除表中的列
ALTER TABLE table_name MODIFY COLUMN column_name datatype	--改变表中列的数据类型
```



#### 21 Auto-increment

Auto-increment 会在新记录插入表中时生成一个唯一的数字。

```sql
实例：
CREATE TABLE Persons(
ID int NOT NULL AUTO_INCREMENT,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255),
PRIMARY KEY (ID)
)
```



