## 对象与类



#### 一、概念

**面向对象编程**(Object Oriented Programming)：是一种通过对象的方式，把现实世界映射到计算机模型的一种编程方法。

**类**（Class）：是对一类事物的描述 ，是抽象的 、概念上的定义，由构造器（Constructor ）、属性（Field）、方法（Method）组成。

**对象**（Object）：是实际存在的该类事物的每个个体，因而也称为实例（instance）。



【示例】：“书”是一种抽象的概念，它是类，而《Java核心技术》、《Java编程思想》是对象。



#### 二、预定义类

##### 2.1 Date

Date：时间日期类

```java
Date date=new Date();
```



##### 2.2 LocalDate

LocalDate：日期类

LocalDate方法：

- static Local Time now( ) ：构造一个表示当前日期的对象。
- static LocalTime of(int year , int month , int day) ：构造一个表示给定日期的对象。
- int getYear( ) ：获取当前日期的年。
- int getMonthValue( ) ：获取当前日期的月。
- int getDayOfMonth( ) ：获取当前日期的日。
- DayOfWeek getDayOfWeek ：获取当前日期是星期几，1 表示星期一， 7 表示星期日。  
- LocalDate minusDays(int n) ：返回指定日期之前n天日期
- LocalDate plusDays(int n) ：返回指定日期之后n天日期

```java
LocalDate date=LocalDate.now();            //构造表示当前日期的对象
LocalDate date=LocalDate.of(2020,9,10);    //构造表示固定日期的对象

int year=date.getYear();            //2020，获取年
int month=date.getMonthValue();     //9，获取月
int day=date.getDayOfMonth();       //10，获取日

DayOfWeek weekday=date.getDayOfWeek();    //获取星期，星期一为1，星期日为7
```



```java
package com.test.java;
 
import java.time.DayOfWeek;
import java.time.LocalDate;
 
/**
 * 测试日历类
 * @author 林
 *
 */
public class TestLocalDate {
	public static void main(String[] args) {
		/*LocalDate类不能使用构造器创建对象*/
		//LocalDate d1=LocalDate.now();	//创建日历对象，指定当前日期
		LocalDate d1=LocalDate.of(2020, 9, 10);		//创建日历对象,指定日期2020-9-10
		int year=d1.getYear();			//获取年份
		int month=d1.getMonthValue();	//获取月份
		int day=d1.getDayOfMonth();		//获取天数
		
		d1=d1.minusDays(day-1);		//设置为当月的第一天
		DayOfWeek week=d1.getDayOfWeek();	//创建星期对象
		int value=week.getValue();	//获取星期,1=星期一，7=星期日
		
		System.out.println(year+"年"+month+"月");
		System.out.println("一\t二\t三\t四\t五\t六\t日");
		
		for(int i=1;i<value;i++) {
			System.out.print("\t");
		}
		while(d1.getMonthValue()==month) {
			System.out.print(d1.getDayOfMonth());
			if(d1.getDayOfMonth()==day) {
				System.out.print("*");
			}
			if(d1.getDayOfWeek().getValue()!=7) {
				System.out.print("\t");
			}
			d1=d1.plusDays(1);
			if(d1.getDayOfWeek().getValue()==1) {
				System.out.println();
			}
		}		
	}
}
```





#### 三、自定义类

##### 3.1 自定义类

```java
class Employee {
   private String name;		//属性
   private double salary;
  
   public Employee(String name, double salary){	//构造器
      this.name =name;		//隐式参数this，显式参数name
      this.salary=salary;
   }
   
   public String getName(){		//方法
      return name;
   }

   public double getSalary(){
      return salary;
   }
}
```



##### 3.2 修饰符

关键字 private 确保只有 Employee 类自身的方法能够访问这些实例域， 而其他类的方法不能够读写这些域。



##### 3.3 构造器

【要点：】

- 构造器与类同名。
- 每个类可以有一个以上的构造器。
- 构造器可以有 0 个、1 个或多个参数。
- 构造器没有返回值。
- 构造器总是伴随着 new 操作一起调用。
- 如类没有自定义构造器，系统就会提供一个无参数构造器，将所有的实例域设置为默认值。



##### 3.4 this关键字

this关键用途1：隐式参数。

```java
   public Employee(String name, double salary){	//构造器
      this.name =name;		//隐式参数this，显式参数name
      this.salary=salary;
   }
```



this关键用途2：调用构造器。

```java
public Employee(double s){
	// calls Employee(String, double)
	this("Employee #" + nextld, s);
	nextld++;
}
```



##### 3.5 static关键字

###### 3.5.1 静态属性

每个类中只有一个静态属性。  

```java
class Employee {
	private static int nextld = 1;
	...
}
```

###### 3.5.2 静态常量

```java
public class Math{
	public static final double PI = 3.14159265358979323846;
}
```

###### 3.5.3 静态方法

静态方法是一种不能向对象实施操作的方法。

```java
public static int getNextldO {
	return nextld;
}
```

###### 3.5.4 工厂方法

静态工厂方法 (factory metho)构造对象，不使用new关键字。

```java
LocalDate date=LocalDate.now();
```

###### 3.5.5 main方法

main 方法不对任何对象进行操作。  



##### 3.6 final关键字

final设置的属性不能修改。

final 修饰符大都应用于基本 （primitive) 类型属性，或不可变（immutable) 类的属性。  

```java
class Employee {
	private final String name;
}
```



##### 3.7 方法参数

按值调用 (call by value) ：表示方法接收的是调用者提供的值。

按引用调用 (call by reference) ：表示方法接收的是调用者提供的变量地址。  

```java
//基本数据类型参数
public class Main {
    public static void main(String[] args) {
        Person p = new Person();
        int n = 15;
        p.setAge(n);     //setAge()方法获得的参数，复制了n的值给p.age，后面n改变不影响p.age
        System.out.println(p.getAge()); // 打印15
        n = 20;
        System.out.println(p.getAge()); // 打印15
    }
}
```



```java
//引用类型参数
public class TestMethod {
    public static void main(String[] args) {
        Person p=new Person();
        String[] f=new String[] {"林一","林二"};
        p.setName(f);  //数组是一个对象，传入数组只是传引用地址
        System.out.println(p.getName());
        f[1]="林三";  //修改数组元素
        System.out.println(p.getName());  //引用地址没变，数组元素改变，结果也改变
    }
}

class Person{
    private String[] name;
    public String getName() {
        return this.name[0]+" "+this.name[1];
    }
    public void setName(String[] name) {
        this.name=name;
    }
}
```



##### 3.8 方法重载

重载(Overloading)：如果多个方法有相同的名字、不同的参数，便产生了重载。  

Java 允许重载任何方法。



##### 3.9 属性默认初始化值

- 数值为 0
- 布尔值为 false
- 对象引用为 null



##### 3.10 块初始化

```java
{
    id=nextId;
    nextId++;
}
```





#### 四、Package包

Sun 公司建议将公司的因特网域名以逆序的形式作为包名，并且对于不同的项目使用不同的子包。  



##### 4.1 导入类

```java
import java.time.LocalDate;
```



##### 4.2 静态导入

import 语句导人静态方法和静态属性。  

```java
import static java.lang.System.*;
```



##### 4.3 类放入包

```java
package com.test.java
public class Employee {
    ...
}
```





#### 五、类路径

```bash
# 设置类路径
export CLASSPATH=/home/user/classdir:.:/ home/user/archives/archive.jar
```





#### 六、文档注释

JDK 包含一个很有用的工具，叫做javadoc, 它可以由源文件生成一个 HTML 文档。   





#### 七、类设计技巧

1. 一定要保证数据私有。
2. 一定要对数据初始化。
3. 不要在类中使用过多的基本类型。
4. 不是所有的域都需要独立的域访问器和域更改器。
5. 将职责过多的类进行分解。
6. 类名和方法名要能够体现它们的职责。
7. 优先使用不可变的类。



