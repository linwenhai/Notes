

1】type

```yml
filebeat.inputs:
- type: log
  enabled: true
  paths:
    - /var/log/*.log
```



2】Manage multiline messages

```yml
multiline.type: pattern
multiline.pattern: '^\['
multiline.negate: true
multiline.match: after
```

```yml
multiline.type: pattern
multiline.pattern: '^\[[0-9]{4}-[0-9]{2}-[0-9]{2}'
multiline.negate: true
multiline.match: after
```





3】elasticsearch模板：

```yml
setup.template.enabled: true
setup.template.name: "text"
setup.template.pattern: "text-*"
setup.template.overwrite: false
setup.template.settings:
  index.number_of_shards: 1
  index.number_of_replicas: 1
```



4】output elasticsearch

```yml
output.elasticsearch:
  hosts: ["https://myEShost:9200"]
  index: "text-%{+yyyy.MM.dd}" 
  username: "elastic"
  password: "111qqq"
```



```yml
output.elasticsearch:
  hosts: ["http://localhost:9200"]
  indices:
    - index: "warning-%{[agent.version]}-%{+yyyy.MM.dd}"
      when.contains:
        message: "WARN"
    - index: "error-%{[agent.version]}-%{+yyyy.MM.dd}"
      when.contains:
        message: "ERR"
```



