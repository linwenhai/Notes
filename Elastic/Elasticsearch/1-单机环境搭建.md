

#### 1 ES获取

elasticsearch-7.2.1-linux-x86_64.tar.gz

```bash
curl -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.2.1-linux-x86_64.tar.gz
```



#### 2 OS配置

```bash
ulimit -n
vi /etc/security/limits.conf
```

>#添加内容
>
>*              soft    nproc   65535
>*              hard    nproc   65535
>*              soft    nofile  65535
>*              hard    nofile  65535

```bash
vi /etc/sysctl.conf
```

>#添加内容
>
>vm.max_map_count=262144

```bash
sysctl -p
```



#### 3 ES配置

config/elasticsearch.yml

```yml
cluster.name: es-test
node.name: node-1
path.data: /opt/elasticsearch/data
path.logs: /opt/elasticsearch/logs
network.host: 192.168.100.11
http.port: 9200
cluster.initial_master_nodes: ["node-1"]
xpack.security.enabled: true
xpack.security.transport.ssl.enabled: true
```



#### 4 为内置账号添加密码

```bash
# 参数interactive：给用户一一设置密码，auto：自动生成密码
bin/elasticsearch-setup-passwords interactive
```

```bash
interactive
Initiating the setup of passwords for reserved users elastic,apm_system,kibana,logstash_system,beats_system,remote_monitoring_user.
You will be prompted to enter passwords as the process progresses.
Please confirm that you would like to continue [y/N]y

Enter password for [elastic]: 
Reenter password for [elastic]: 
Enter password for [apm_system]: 
Reenter password for [apm_system]: 
Enter password for [kibana]: 
Reenter password for [kibana]: 
Enter password for [logstash_system]: 
Reenter password for [logstash_system]: 
Enter password for [beats_system]: 
Reenter password for [beats_system]: 
Enter password for [remote_monitoring_user]: 
Reenter password for [remote_monitoring_user]: 
Changed password for user [apm_system]
Changed password for user [kibana]
Changed password for user [logstash_system]
Changed password for user [beats_system]
Changed password for user [remote_monitoring_user]
Changed password for user [elastic]
```



```bash
curl -u elastic:password 'http://192.168.100.11:9200'
```

