

### 1 _search接口

search接口请求方式：URI与DSL

```bash
# 基于URI
GET kibana_sample_data_logs/_search?q=message:chrome firefox
```

```bash
# 基于DSL
GET kibana_sample_data_flights/_search
{
  "query": {
    "term": {
      "DestCountry": "CN"
    }
  }
}
```



```bash
# match_all匹配所有文档
GET kibana_sample_data_logs/_search
{
  "query": {
    "match_all": {}
  }
}

# match_none都不匹配文档
GET kibana_sample_data_flights/_search
{
  "query": {
    "match_none": {}
  }
}
```



### 2 分页和排序

#### 2.1 from与size参数

_search接口提供from和size参数实现分页。

- from：代表检索文档的起始位置，默认为0。
- size：代表每次检索文档的总量，默认为10。

```bash
GET kibana_sample_data_flights/_search
{
  "from":100,
  "size":20,
  "query":{
    "term":{
      "DestCountry": "CN"
    }
  }
}
```



#### 2.2 scroll参数

```bash
# 1 创建游标
POST kibana_sample_data_logs/_search?scroll=2m
{
  "size":1000,
  "query": {
    "term":{
      "message":"chrome"
    }
  }
}
```

```bash
# 2 遍历游标
POST _search/scroll
{
  "scroll":"2m",
  "scroll_id":"DXF1ZXJ5QW5kRmV0Y2gBAAAAAAAABDIWUmltUkpraFRUSnE0V0hYOFR4YzR2QQ=="
}
```



#### 2.3 search_after参数

 

#### 2.4 sort参数

```bash
POST kibana_sample_data_flights/_search
{
  "sort":[
    "AvgTicketPrice",
    {"FlightDelayMin": "asc"},
    {"DistanceKilometers": {"order": "desc"}},
    "_score"
    ]
}
```









