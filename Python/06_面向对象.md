## 面向对象

### 1 面相对象基础语法

1】 Python内置方法

| 序号 | 方法名     | 类型 | 作用                                    |
| ---- | ---------- | ---- | --------------------------------------- |
| 01   | `__new__`  | 方法 | 创建对象时，会被自动调用                |
| 02   | `__init__` | 方法 | 对象被初始化时，会被自动调用            |
| 03   | `__del__`  | 方法 | 对象被从内存中销毁前，会被自动调用      |
| 04   | `__str__`  | 方法 | 返回对象的描述信息，`print`函数输出使用 |



2】 类例子

```python
# 定义类例子
class Cat:    # 类名要符合大驼峰命名法
    """这是一个猫类"""

    def eat(self):    # 类方法，第一个参数必须是self
        print("小猫爱吃鱼")

    def drink(self):
        print("小猫在喝水")

tom = Cat()    # 创建对象
tom.drink()    # 调用对象方法
tom.eat()
```

- 在Python中使用类创建对象之后，tom变量中记录的是对象在内存中的地址。
- 使用print输出对象变量，输出类创建的对象的地址（十六进制表示）。
- %d 以10进制输出数字。
- %x 以16进制输出数字。



3】方法中的 self参数

**在方法内部**：

- 可以通过 self. 访问对象的属性。
- 也可以通过 self. 调用其他的对象方法。

**在类的外部**：

- 通过 变量名. 访问对象的属性和方法。

4】`__init__`方法

`__init__` 方法：是用来定义一个类 具有哪些属性的方法。

当使用 类名() 创建对象时，会自动执行以下操作：

- 为对象在内存中分配空间（创建对象）。
- 为对象的属性设置初始值（初始化方法__init__）。

```python
class Cat:

    def __init__(self,anme):
        print("这是一个初始化方法")
        self.name = name    # 定义对象属性

    def eat(self):
        print("%s 爱吃鱼" % self.name)

tom = Cat("Tom")    # 创建对象自动调用初始化方法 __init__
tom.eat()
```



5】面向对象三大特性

- 封装：根据职责将属性和方法封装到一个抽象的类中。

- 继承：实现代码的重用，相同的代码不需要重复的编写。

- 多态：不同的对象调用相同的方法，产生不同的执行结果，增加代码的灵活度。



### 2 封装

封装：根据职责将属性和方法封装到一个抽象的类中。

```python
class Person:
    """人类"""

    def __init__(self, name, weight):

        self.name = name
        self.weight = weight

    def __str__(self):

        return "我的名字叫 %s 体重 %.2f 公斤" % (self.name, self.weight)

    def run(self):
        """跑步"""

        print("%s 爱跑步，跑步锻炼身体" % self.name)
        self.weight -= 0.5

    def eat(self):
        """吃东西"""

        print("%s 是吃货，吃完这顿再减肥" % self.name)
        self.weight += 1


xiaoming = Person("小明", 75)

xiaoming.run()
xiaoming.eat()
xiaoming.eat()

print(xiaoming)
```



### 3 继承

继承：实现代码的重用，相同的代码不需要重复的编写。

继承：子类拥有父类的所有方法和属性。

在子类中重写父类的方法，在需要的位置使用 **super().父类方法**来调用父类方法的执行。



### 4 多态

多态：不同的对象调用相同的方法，产生不同的执行结果，增加代码的灵活度。

多态不同的子类对象调用相同的父类方法，产生不同的执行结果。

![016_多态示意图](image/016_多态示意图.png)

```python
class Dog(object):
    def __init__(self,name):
        self.name=name
    def game(self):
        print("{0} 蹦蹦跳跳的玩耍。".format(self.name))

class XTDog(Dog):
    def game(self):
        print("{0} 飞到天上去玩耍。".format(self.name))

class Person(object):
    def __init__(self,name):
        self.name=name
    def game_with_dog(self,dog):
        print("{0}和{1} 快乐玩耍。".format(self.name,dog.name))
        dog.game()

wangcai=XTDog("飞天旺财")
linyi=Person("林一")
linyi.game_with_dog(wangcai)
```



### 5 类属性和方法

- 创建出来的对象叫做类的实例。

- 创建对象的动作叫做实例化。

- 对象的属性叫做实例属性。

- 对象调用的方法叫做实例方法。

- 类是一个特殊的对象——类对象。

- 类对象在内存中只有一份，使用一个类可以创建出很多个对象实例。

- 除了封装实例的属性和方法外，类对象还可以拥有自己的属性和方法。

1】类属性和方法

```python
class Tool(object):
    count = 0	# 类属性
    def __init__(self, name):
        self.name = name
        Tool.count += 1
    @classmethod    # 类方法
    def show_tool_count(cls):
        """显示工具对象的总数"""
        print("工具对象的总数 %d" % cls.count)

tool1 = Tool("斧头")
tool2 = Tool("榔头")
tool3 = Tool("铁锹")

print("现在创建了{0}个工具".format(Tool.count))
```

2】静态方法

静态方法：

- 既不需要访问实例属性或者调用实例方法。

- 也不需要访问类属性或者调用类方法。

```python
class Dog(object):
    dog_count = 0
    
    @staticmethod
    def run():
        print("狗在跑...")

    def __init__(self, name):
        self.name = name
```



### 6 私有方法和属性

在定义属性或方法时，在属性名或者方法名前增加两个下划线。

```python
class Women:

    def __init__(self, name):

        self.name = name
        self.__age = 18		# 私有属性

    def __secret(self):		# 私有方法
        print("我的年龄是 %d" % self.__age)


xiaofang = Women("小芳")
# 私有属性，外部不能直接访问
# print(xiaofang.__age)

# 私有方法，外部不能直接调用
# xiaofang.__secret()
```



### 7 单例

重写`__new__`方法一定要return super().`__new__`(cls)。

```python
class MusicPlayer(object):
    def __new__(cls, *args, **kwargs):
        return super().__new__(cls)
    def __init__(self):
        print("初始化音乐播放对象")

player=MusicPlayer()
print(player)
```

